# Plero í”„ë¡œì íŠ¸ ë””ìì¸ ì‹œìŠ¤í…œ

## ğŸ¨ ìƒ‰ìƒ íŒ”ë ˆíŠ¸

### CSS ë³€ìˆ˜ ì‚¬ìš© (assets/css/main.css ê¸°ì¤€)
```css
/* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
--ui-text-dimmed: var(--color-neutral-400);     /* í¬ë¯¸í•œ í…ìŠ¤íŠ¸ */
--ui-text-muted: var(--color-neutral-500);      /* ë³´ì¡° í…ìŠ¤íŠ¸ */
--ui-text: var(--color-neutral-700);            /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
--ui-text-highlighted: var(--color-neutral-900); /* ê°•ì¡° í…ìŠ¤íŠ¸ */
--ui-text-inverted: var(--color-white);         /* ë°˜ì „ í…ìŠ¤íŠ¸ */

/* ë°°ê²½ ìƒ‰ìƒ */
--ui-bg: var(--color-white);                    /* ê¸°ë³¸ ë°°ê²½ */
--ui-bg-muted: var(--color-neutral-50);         /* ë³´ì¡° ë°°ê²½ */
--ui-bg-elevated: var(--color-neutral-100);     /* ë¶€ê°ëœ ë°°ê²½ */
--ui-bg-inverted: var(--color-neutral-900);     /* ë°˜ì „ ë°°ê²½ */

/* í…Œë‘ë¦¬ ìƒ‰ìƒ */
--ui-border: var(--color-neutral-200);          /* ê¸°ë³¸ í…Œë‘ë¦¬ */
--ui-border-accented: var(--color-neutral-300); /* ê°•ì¡°ëœ í…Œë‘ë¦¬ */

/* í”„ë¼ì´ë¨¸ë¦¬ ìƒ‰ìƒ */
--ui-primary: var(--color-indigo-400);          /* ê¸°ë³¸ í”„ë¼ì´ë¨¸ë¦¬ */
--ui-primary-muted: var(--color-indigo-500);    /* ë³´ì¡° í”„ë¼ì´ë¨¸ë¦¬ */
--ui-primary-elevated: var(--color-indigo-600); /* ë¶€ê°ëœ í”„ë¼ì´ë¨¸ë¦¬ */
```

## ğŸ—ï¸ ë ˆì´ì•„ì›ƒ íŒ¨í„´

### í˜ì´ì§€ ê¸°ë³¸ êµ¬ì¡°
```vue
<template>
    <div class="min-h-screen bg-[var(--ui-bg)]">
        <!-- ìƒë‹¨ í—¤ë” -->
        <div class="sticky top-0 z-10 bg-[var(--ui-bg)] border-b border-[var(--ui-border)] shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- í—¤ë” ë‚´ìš© -->
            </div>
        </div>
        
        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <!-- ì½˜í…ì¸  -->
        </div>
    </div>
</template>
```

### ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
```vue
<div class="bg-[var(--ui-bg)] border border-[var(--ui-border)] rounded-xl shadow-sm">
    <div class="p-6">
        <!-- ì½˜í…ì¸  -->
    </div>
</div>
```

## ğŸ”˜ ë²„íŠ¼ íŒ¨í„´

```vue
<!-- í”„ë¼ì´ë¨¸ë¦¬ ë²„íŠ¼ -->
<button class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--ui-primary)] to-[var(--ui-primary-muted)] text-white rounded-lg hover:from-[var(--ui-primary-muted)] hover:to-[var(--ui-primary-elevated)] transition-all duration-200">
    <Icon icon="material-symbols:save" width="16" height="16" />
    <span class="text-sm font-medium">ì €ì¥</span>
</button>

<!-- ì„¸ì»¨ë”ë¦¬ ë²„íŠ¼ -->
<button class="flex items-center gap-2 px-3 py-2 text-[var(--ui-text-muted)] hover:text-[var(--ui-text)] border border-[var(--ui-border)] rounded-lg hover:bg-[var(--ui-bg-muted)] transition-all duration-200">
    <Icon icon="material-symbols:edit" width="16" height="16" />
    <span class="text-sm font-medium">í¸ì§‘</span>
</button>
```

## ğŸ¯ ì•„ì´ì½˜ ì‚¬ìš©ë²•

### Iconify ê¸°ë³¸ ì‚¬ìš©
```vue
<script setup>
import { Icon } from '@iconify/vue';
</script>

<template>
    <Icon icon="material-symbols:home-outline" width="20" height="20" />
</template>
```

### ìì£¼ ì‚¬ìš©í•˜ëŠ” ì•„ì´ì½˜
- `material-symbols:arrow-back` - ë’¤ë¡œê°€ê¸°
- `material-symbols:edit` - í¸ì§‘
- `material-symbols:save` - ì €ì¥
- `material-symbols:delete-outline` - ì‚­ì œ
- `material-symbols:history` - ë³€ê²½ ê¸°ë¡

## ğŸ“± ë°˜ì‘í˜• & ì• ë‹ˆë©”ì´ì…˜

### ë¸Œë ˆì´í¬í¬ì¸íŠ¸
- `sm:` (640px+), `md:` (768px+), `lg:` (1024px+), `xl:` (1280px+)

### í‘œì¤€ íŠ¸ëœì§€ì…˜
```css
transition-colors duration-200   /* ìƒ‰ìƒ ë³€í™” */
transition-all duration-200      /* ëª¨ë“  ì†ì„± ë³€í™” */
```

## ğŸ§© ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### StarButton (ì¦ê²¨ì°¾ê¸°)
```typescript
interface Props {
    wikiId: string;
    initialStarCount?: number;
}
```
- ë¶„í•  ë²„íŠ¼: ë©”ì¸ ì¦ê²¨ì°¾ê¸° + ë“œë¡­ë‹¤ìš´
- ë‹¤ì¤‘ ëª©ë¡ ì§€ì›, ìƒˆ ëª©ë¡ ìƒì„±
- ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸

### WikiPublishButton (ê³µê°œ/ë¹„ê³µê°œ)
```typescript
interface Props {
    isPublished: boolean;
    wikiId: string;
    wikiTitle: string;
}
```
- ì œëª© ì¤‘ë³µ ê²€ì‚¬, ëª¨ë‹¬ ì¸í„°í˜ì´ìŠ¤
- ìƒíƒœë³„ ë²„íŠ¼ í‘œì‹œ

### AuthorizePopup (ë¡œê·¸ì¸ ìš”êµ¬)
```typescript
interface Props {
    visible?: boolean;
    title?: string;
    message?: string;
    requiredFeature?: string;
    returnUrl?: string;
}
```

### AdminPanel (ê´€ë¦¬ì ì „ìš©)
- ìœ„ì¹˜: ìš°ì¸¡ ìƒë‹¨ ë¹¨ê°„ ì™•ê´€ ì•„ì´ì½˜
- ë‹¨ì¶•í‚¤: `Ctrl+Shift+A`
- ê¸°ëŠ¥: ìœ„í‚¤ ì˜êµ¬ ì‚­ì œ

## ğŸ¤– AI ì‹œìŠ¤í…œ

### AI ìœ„í‚¤ ìƒì„±
```typescript
// ì¼ë°˜ ìƒì„±
const response = await $fetch('/api/ai/wiki', {
    method: 'POST',
    body: { instruction }
});

// ìŠ¤íŠ¸ë¦¼ ìƒì„± (ì¤‘ë‹¨ ê°€ëŠ¥)
const response = await fetch('/api/ai/wiki', {
    method: 'POST',
    body: JSON.stringify({ instruction, stream: true }),
    signal: abortController.signal
});
```

### ë©€í‹°ëª¨ë‹¬ ì§€ì›
- **ì§€ì› í˜•ì‹**: ì´ë¯¸ì§€(JPG, PNG, GIF, WebP, SVG), ë¬¸ì„œ(PDF, DOCX, TXT, MD, CSV, XLSX)
- **í¬ê¸° ì œí•œ**: 10MB per íŒŒì¼
- **ê¸°ëŠ¥**: ë“œë˜ê·¸&ë“œë¡­, íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°, ìë™ ì •ë¦¬(24ì‹œê°„)

### AI í¸ì§‘ íˆ´íŒ
- **ê¸°ë³¸ ê¸°ëŠ¥**: ê°œì„ , ìš”ì•½, í™•ì¥, ë²ˆì—­
- **ë©€í‹°ëª¨ë‹¬**: "ì§€ì •" ëª¨ë“œì—ì„œ íŒŒì¼ ì²¨ë¶€ ê°€ëŠ¥
- **í”„ë¡œì„¸ìŠ¤**: í…ìŠ¤íŠ¸ ì„ íƒ â†’ íˆ´íŒ â†’ íŒŒì¼ ì²¨ë¶€ â†’ AI í¸ì§‘ â†’ ê²°ê³¼ ì ìš©

## ğŸ“Š ìƒíƒœ ê´€ë¦¬

### ë¡œë”© ìƒíƒœ
```vue
<Icon v-if="loading" icon="line-md:loading-loop" width="18" height="18" />
```

### ë¹ˆ ìƒíƒœ
```vue
<div class="text-center py-12">
    <Icon icon="material-symbols:check-circle-outline" width="48" height="48" class="mx-auto text-[var(--ui-text-muted)] mb-4" />
    <h3 class="text-lg font-medium text-[var(--ui-text)] mb-2">ë°ì´í„° ì—†ìŒ</h3>
    <p class="text-[var(--ui-text-muted)]">í‘œì‹œí•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
</div>
```

## ğŸ“ˆ ìµœê·¼ ì™„ë£Œ ê¸°ëŠ¥

### ì¦ê²¨ì°¾ê¸° ì‹œìŠ¤í…œ (2024-12-26)
- ë‹¤ì¤‘ ëª©ë¡ ì§€ì›, ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
- ìƒˆ ëª©ë¡ ìƒì„±, 19ê°œ vitest í†µê³¼

### íƒœê·¸ ì‹œìŠ¤í…œ UI (2024-12-26)
- ì‚¬ìš©ì/ì‹œìŠ¤í…œ íƒœê·¸ êµ¬ë¶„, Enter í‚¤ ì…ë ¥
- ì‹œê°ì  êµ¬ë¶„, ì¤‘ë³µ ë°©ì§€, ê°œë³„ ì‚­ì œ

### í˜ì´ì§€ë„¤ì´ì…˜ ìµœì í™” (2024-12-27)
- ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ìœ ì§€, í˜ì´ì§€ ë¦¬ë¡œë“œ ì—†ëŠ” ë”ë³´ê¸°
- ìœ„í‚¤ ëª©ë¡, íˆìŠ¤í† ë¦¬ í˜ì´ì§€ ì ìš©

### AI ë©€í‹°ëª¨ë‹¬ ì§€ì› (2024-12-26)
- ìœ„í‚¤ ìƒì„±: ì´ë¯¸ì§€, PDF, ë¬¸ì„œ ë¶„ì„
- í¸ì§‘ íˆ´íŒ: íŒŒì¼ ì²¨ë¶€ ê¸°ë°˜ ì •í™•í•œ í¸ì§‘

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ (Drizzle ORM + PostgreSQL)

### AWS Aurora DSQL ì—°ë™ (2024-12-27)
Zod ìŠ¤í‚¤ë§ˆë¥¼ Drizzle ORM PostgreSQL ìŠ¤í‚¤ë§ˆë¡œ ë³€í™˜í•˜ì—¬ AWS Aurora DSQLê³¼ í˜¸í™˜ë˜ë„ë¡ êµ¬ì„±

### ìŠ¤í‚¤ë§ˆ êµ¬ì¡°
- **Users**: ì‚¬ìš©ì ì •ë³´ (Google OAuth, GitHub, ì´ë©”ì¼ ì¸ì¦ ì§€ì›)
- **Wikis**: ìœ„í‚¤ ë©”ì¸ í…Œì´ë¸” (UUID ê¸°ë°˜, JSONB íƒœê·¸ ì§€ì›)  
- **WikiContributors**: ìœ„í‚¤ ê¸°ì—¬ì ì¶”ì 
- **WikiHistory**: ì „ì²´ ìŠ¤ëƒ…ìƒ· ë°©ì‹ ë²„ì „ ê´€ë¦¬
- **FavoritesLists**: ì‚¬ìš©ìë³„ ì¦ê²¨ì°¾ê¸° ëª©ë¡
- **FavoritesItems**: ì¦ê²¨ì°¾ê¸° ì•„ì´í…œ

### ì£¼ìš” íŠ¹ì§•
- UUID ê¸°ë³¸í‚¤ ì‚¬ìš© (defaultRandom())
- JSONB íƒ€ì…ìœ¼ë¡œ íƒœê·¸, ì„¤ì •, ë©”íƒ€ë°ì´í„° ì €ì¥
- ì ì ˆí•œ ì¸ë±ìŠ¤ ì„¤ì •ìœ¼ë¡œ ì¿¼ë¦¬ ìµœì í™”
- CASCADE ì‚­ì œë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥
- ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¤‘ë³µ ë°©ì§€

### ëª…ë ¹ì–´
```bash
# ìŠ¤í‚¤ë§ˆ ë³€ê²½ í›„ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
npm run db:generate

# ë°ì´í„°ë² ì´ìŠ¤ì— ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©  
npm run db:migrate

# Drizzle Studioë¡œ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
npm run db:studio

# ìŠ¤í‚¤ë§ˆë¥¼ ì§ì ‘ í‘¸ì‹œ (ê°œë°œìš©)
npm run db:push
```

### íŒŒì¼ êµ¬ì¡°
- `server/db/drizzle-schema.ts`: Drizzle ìŠ¤í‚¤ë§ˆ ì •ì˜
- `server/db/drizzle-connection.ts`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- `server/db/migrate.ts`: ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
- `server/db/migrations/`: ìƒì„±ëœ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ë“¤
- `drizzle.config.ts`: Drizzle Kit ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜
```bash
# AWS Aurora DSQL ì—°ê²°
DATABASE_URL="postgresql://username:password@your-aurora-dsql-endpoint.amazonaws.com:5432/plero"
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ

### DB í†µí•© í…ŒìŠ¤íŠ¸ ì™„ì „ ì¬í¸ (2024-12-27)
ëª¨ë“  DB ëª¨ë“ˆì— ëŒ€í•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜ì™€ ì²´ê³„ì ì¸ í†µí•© í…ŒìŠ¤íŠ¸ êµ¬ì¡°ë¥¼ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

#### íŒŒì¼ êµ¬ì¡°
- `test/db/wiki.nuxt.test.ts`: Wiki DB í†µí•© í…ŒìŠ¤íŠ¸ âœ…
- `test/db/favoritesItem.nuxt.test.ts`: ì¦ê²¨ì°¾ê¸° ì•„ì´í…œ DB í…ŒìŠ¤íŠ¸ âœ…  
- `test/db/favoritesList.nuxt.test.ts`: ì¦ê²¨ì°¾ê¸° ëª©ë¡ DB í…ŒìŠ¤íŠ¸ âš ï¸
- `test/db/wikiContributor.nuxt.test.ts`: ìœ„í‚¤ ê¸°ì—¬ì DB í…ŒìŠ¤íŠ¸ âš ï¸
- `test/db/wikiHistory.nuxt.test.ts`: ìœ„í‚¤ ê¸°ë¡ DB í…ŒìŠ¤íŠ¸ âš ï¸
- `test/mock.ts`: ëª¨ë“  DB ì—”í‹°í‹° Mock í—¬í¼
- `utils/test-helpers.ts`: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°

#### Mock í—¬í¼ í•¨ìˆ˜ (ì™„ì „ ì¬ì„¤ê³„)
```typescript
// test/mock.ts - ëª¨ë“  ì—”í‹°í‹° ì§€ì›
import { 
  createMockWiki, 
  createMockFavoritesList, 
  createMockWikiContributor, 
  createMockWikiHistory 
} from '../mock';

// Wiki ìƒì„± (ì‚¬ìš©ì í¬í•¨)
const { wiki, mockUser, cleanUpWiki } = await createMockWiki({
  title: 'Custom Title', 
  isPublished: false 
});

// ì¦ê²¨ì°¾ê¸° ëª©ë¡ ìƒì„±
const { favoritesList, mockUser, cleanUpFavoritesList } = await createMockFavoritesList({
  name: 'My Favorites',
  color: '#ff6b6b'
});

// ìœ„í‚¤ ê¸°ì—¬ì ìƒì„±
const { contributorData, mockUser, cleanUpWikiContributor } = await createMockWikiContributor();

// ìœ„í‚¤ ê¸°ë¡ ìƒì„±
const { historyData, mockUser, cleanUpWikiHistory } = await createMockWikiHistory();
```

#### í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹° (utils/test-helpers.ts)
```typescript
// DB ì—°ê²° í…ŒìŠ¤íŠ¸
await testDbConnection();

// CRUD ê²€ì¦
await validateWikiCrud(wikiData);

// í˜ì´ì§€ë„¤ì´ì…˜ í…ŒìŠ¤íŠ¸  
await testPagination(totalItems, pageSize, query);

// ê²€ìƒ‰ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
await testSearchFunctionality(searchTerm, expectedCount);

// ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬
await bulkCreateWikis(count, baseData, titlePrefix);
await bulkDeleteWikis(wikiIds);

// ì„±ëŠ¥ ì¸¡ì •
const { result, executionTime } = await measureOperation(operation);

// ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
await testErrorHandling(operation, expectedErrorMessage);
```

#### ì»¤ë²„ë¦¬ì§€ í˜„í™©

**âœ… Wiki (10/10 í…ŒìŠ¤íŠ¸ í†µê³¼)**
- CRUD ì‘ì—…, ê²€ìƒ‰/í•„í„°ë§, í˜ì´ì§€ë„¤ì´ì…˜, ì—ëŸ¬ ì²˜ë¦¬

**âœ… FavoritesItem (11/11 í…ŒìŠ¤íŠ¸ í†µê³¼)**  
- ì¦ê²¨ì°¾ê¸° ì¶”ê°€/ì œê±°, ì¤‘ë³µ ë°©ì§€, ëª©ë¡ë³„ ì¡°íšŒ, ì‚¬ìš©ìë³„ ì¡°íšŒ, ì¹´ìš´íŠ¸

**âš ï¸ FavoritesList (7/8 í…ŒìŠ¤íŠ¸, 1ê°œ ì‹¤íŒ¨)**
- ê¸°ë³¸ ëª©ë¡ ìƒì„± ì‹¤íŒ¨ (ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ ë¬¸ì œ)

**âš ï¸ WikiContributor (0/4 í…ŒìŠ¤íŠ¸ í†µê³¼)**
- Mock ë°ì´í„° êµ¬ì¡° ê°œì„  í•„ìš”

**âš ï¸ WikiHistory (0/5 í…ŒìŠ¤íŠ¸ í†µê³¼)**  
- Mock ë°ì´í„° êµ¬ì¡° ê°œì„  í•„ìš”

**ì´ í†µí•© í…ŒìŠ¤íŠ¸: 28/38 ê°œ í†µê³¼ (73.7%)**

#### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ê°œë³„ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
npm test -- --run test/db/wiki.nuxt.test.ts
npm test -- --run test/db/favoritesItem.nuxt.test.ts

# ì „ì²´ DB í…ŒìŠ¤íŠ¸
npm test -- --run test/db/
```

#### ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
1. **íƒ€ì… ê°€ë“œ ì‚¬ìš©**: `if (result.success)` ì²´í¬ í›„ ì•ˆì „í•œ ë°ì´í„° ì ‘ê·¼
2. **ìë™ ì •ë¦¬**: ê° í…ŒìŠ¤íŠ¸ í›„ ìƒì„±ëœ ë°ì´í„° ìë™ ì‚­ì œ
3. **ì¬ì‚¬ìš©ì„±**: ê³µí†µ í—¬í¼ í•¨ìˆ˜ë¡œ ì¤‘ë³µ ì½”ë“œ ì œê±°
4. **ì‹¤ì œ DB ì—°ë™**: PostgreSQLê³¼ ì§ì ‘ ì—°ê²°í•˜ì—¬ ì‹¤ì œ í™˜ê²½ í…ŒìŠ¤íŠ¸
5. **ë…ë¦½ì„±**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥
